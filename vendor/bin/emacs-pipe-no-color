#!/usr/bin/env ruby

require 'digest/md5'
require 'fileutils'

input = IO.popen('col -b', 'r+') do |io|
  io.write(STDIN.read)
  io.close_write
  io.read
end

file = "/tmp/#{Digest::MD5.hexdigest(input)}.emacs-pager"

File.write(file, input)
system('emacsclient', '--quiet', file)
FileUtils.rm(file)
