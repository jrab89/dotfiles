# (from https://ss64.com/osx/syntax-profile.html)
# ~/.zshrc file is evaluated every time a shell is launched
# ~/.zprofile file is only evaluated when you login to your mac user account

# oh-my-zsh config
export ZSH="$HOME/.oh-my-zsh"

ZSH_THEME="bira"

plugins=(
  aws
  git
  gem
)

source $ZSH/oh-my-zsh.sh

eval "$(/opt/homebrew/bin/brew shellenv)"
export PATH="$PATH:$HOME/Library/Application Support/JetBrains/Toolbox/scripts"

export PATH="$HOME/.pyenv/bin:$PATH"
export PYENV_VIRTUALENV_DISABLE_PROMPT=1
eval "$(pyenv init --path)"
eval "$(pyenv init -)"
eval "$(pyenv virtualenv-init -)"

# user config
HISTSIZE=10000000
SAVEHIST=10000000

alias ll='ls -althrG'
alias tf=terraform
alias myip='curl http://checkip.amazonaws.com'
alias be='bundle exec'
alias now='date -u +"%Y-%m-%dT%H:%M:%SZ"'
alias k=kubectl

export PATH="$HOME/go/bin:$PATH"

# Homebrew won't link openjdk because it conflicts with macOS software
export PATH="/usr/local/opt/openjdk/bin:$PATH"

export PGUSER=postgres

# https://github.com/rails/spring#environment-variables
export DISABLE_SPRING=1

# https://virtualenv.pypa.io/en/stable/reference/#envvar-VIRTUAL_ENV_DISABLE_PROMPT
export VIRTUAL_ENV_DISABLE_PROMPT=1

# TODO: Remap left option key in iterm to meta, e.g. for 'meta + f' to move forward a word
#       https://stackoverflow.com/a/197092

autoload -U +X bashcompinit && bashcompinit

source /opt/homebrew/opt/chruby/share/chruby/chruby.sh
source /opt/homebrew/opt/chruby/share/chruby/auto.sh

export PATH="$HOME/.cargo/bin:$PATH"

export PATH="$HOME/.krew/bin:$PATH"
export PATH="/opt/homebrew/opt/coreutils/libexec/gnubin:$PATH"

export PATH="$HOME/.local/bin:$PATH"

source <(kubectl completion zsh)
source <(helm completion zsh)

# Generate J Aliases
if [[ -f ~/generate_j_aliases.sh ]]; then
  . ~/generate_j_aliases.sh
fi

chruby '<%= @ruby_version %>'
pyenv global '<%= @python_version %>'

export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init --path)"

export JAVA_HOME="$(/usr/libexec/java_home -v 17)"

source <(kubectl completion zsh)

# https://github.com/ghostty-org/ghostty/discussions/3144
export TERM=xterm-256color
